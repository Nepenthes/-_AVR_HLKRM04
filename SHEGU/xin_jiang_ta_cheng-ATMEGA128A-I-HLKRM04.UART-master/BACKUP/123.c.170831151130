#include<iom128v.h>
#include<macros.h>

#define	 FOSC	   8000000
#define	 BAUD0	   19200
#define	 BAUD1	   19200

typedef	 unsigned char uchar;
typedef	 unsigned int  uint;

void usart0Init(void){

	 UCSR0B = 0x00;                   	//关闭UART00
	 UCSR0A =0x00;                     	//不使用倍速发送（异步）
	 UCSR0C =(1<<UCSZ01)|(1<<UCSZ00);   //数据位为8位
	 UBRR0L=(FOSC/16/(BAUD0+1))%256;    //异步正常情况下的计算公式
	 UBRR0H=(FOSC/16/(BAUD0+1))/256;
	 UCSR0B =(1<<RXEN0)|(1<<TXEN0);     //接收使能和发送使能
}

void usart1Init(void){

 	 UCSR1B = 0x00;   					//关闭USART1
 	 UCSR1A = 0x00;   					//不适使用倍速发送
 	 UCSR1C = (1<<UCSZ11)|(1<<UCSZ10);	//数据位为八位
 	 UBRR1L=(FOSC/16/(BAUD1+1))%256;	//异步正常模式下，UBRR的计算公式
 	 UBRR1H=(FOSC/16/(BAUD1+1))/256;
 	 UCSR1B =(1<<RXEN1)|(1<<TXEN1); 	//接收使能，传送使能
}

void putchar0(unsigned char c){  

     while (!(UCSR0A&(1<<UDRE0)));		//表明发送器已经准备就绪
     UDR0=c;    						//将要发送的数据装入UDR0寄存器
}

void puts0(char *s){
	 
	 while (*s){
	 
  	 	 putchar0(*s);
		 s++;
     } 
    putchar0(0x0a);//回车换行
 	putchar0(0x0d);
 }
 
void main(void)
{
  	  
	  usart0Init();
	  
	  
	  while(1)puts0("soahfoahsofiqwoifbhoiq");
}