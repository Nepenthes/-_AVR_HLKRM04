//-----------------------------------------------------------
//程序由AVR辅助开发工具V2.1.1自动生成     
//MCU系统的处理器为：    ATMega16
//MCU系统的晶振频率：    8.0000 Mhz
//-----------------------------------------------------------

#include <iom16v.h>
#include "uart.h"

//-----------------------------------------------------------
//串口初始化子程序
//字符长度：8位
//奇偶校验：禁止
//通讯模式：异步
//-----------------------------------------------------------
void Uart_Init(void)
{
    UCSRB  =  0x00;     //disable while setting baud rate
    UCSRA  =  0x00;     //Bit1为1则倍速发送
    UCSRC  =  0x86;  
    UBRRL  =  0x03;     //波特率：115200 Bps
    UBRRH  =  0x00;     //误差率：8.507%
    UCSRB  =  0x00;  
}

//-----------------------------------------------------------
//数组转换成可发送的字符串
//-----------------------------------------------------------
char *buffer2str(char *hhh)
{
   unsigned char i=0;

   while (i<40)
   {
      hhh[i]=hhh[i]+48;
      i++;
   }	
   return hhh;
}

//-----------------------------------------------------------
//数字转换成可发送的字符串
//-----------------------------------------------------------
char *long2str(unsigned long hh)
{
   char *ss="    ";

   ss[0]=48+hh/1000;
   ss[1]=48+(hh%1000)/100;
   ss[2]=48+(hh%100)/10;
   ss[3]=48+(hh%10);

   return ss;	
}
